# UX Spec v0.1: 記憶可視化・音声没入・課金透明性

## 概要

本ドキュメントはUX Spec v0.1として、requirements.mdの補足となる以下3つのUX要件を詳細化する：

1. **記憶可視化（Witness）**: AIが「見ている」ことの可視化
2. **音声没入（Voice Immersion）**: 音声中心体験の設計
3. **課金透明性（Payment Transparency）**: 透明で誠実な課金体験

---

## 1. 記憶可視化（Witness）

### 1.1 コンセプト

> 「AIは記憶している」ではなく「AIはあなたを見ている」

ユーザーの行動・発言・変化をAIが観測し、記憶として蓄積していることを**視覚的に可視化**する。これにより：

- ユーザーは「見られている」安心感/緊張感を得る
- 自己物語の積み重ねを実感できる
- 透明性への信頼が生まれる

### 1.2 記憶の種類

| 種類 | 説明 | 可変性 | 表示タイミング |
|---|---|---|---|
| **Ephemeral（対話記憶）** | 日々のチェックイン内容 | 不変 | Mirror Feedback内 |
| **Evolving（進化記憶）** | If-Then/Anti-Pattern | 可変 | ホーム、設定 |
| **Milestone（節目記憶）** | Vow/Meaning Statement | 可変 | Day21、プロフィール |

### 1.3 可視化UI

#### 1.3.1 Evidence Links（Mirror Feedback内）

```
🔗 Evidence Links
├ 1/5: 朝5時起床達成
├ 1/8: スマホ制限開始
└ 1/12: 今日の発言「少し自信がついた」
```

- 過去のEvidence/発言を自動リンク
- タップで詳細表示
- AIが選択した関連記憶を提示

#### 1.3.2 Memory Timeline（プロフィール画面）

```
┌─────────────────────────────────────────┐
│  📚 あなたの記憶                         │
│                                          │
│  ● 1/1  Meaning Statement v1 作成       │
│  │                                       │
│  ○ 1/5  「朝起きるのが辛い」 → 対処      │
│  │                                       │
│  ○ 1/10 If-Then「スマホ→別室」発動      │
│  │                                       │
│  ● 1/15 Vow v2 更新                     │
│  │                                       │
│  ○ 1/18 「少し自信がついた」            │
│  ▼                                       │
└─────────────────────────────────────────┘
```

- 時系列で記憶を表示
- Milestone記憶は●、通常記憶は○
- フィルター機能（種類別）

#### 1.3.3 AI Observation Badge

特定の表示に「AIが観測中」を示すバッジを付与：

```
┌─────────────────────────────────────────┐
│  🔬 AIの観測                             │
│                                          │
│  「朝の時間の使い方」について            │
│  継続的に観測しています                  │
│                                          │
│  関連する記憶: 5件                       │
│  最終更新: 2時間前                       │
└─────────────────────────────────────────┘
```

### 1.4 実装優先順位

1. **MVP必須:** Evidence Links in Mirror Feedback
2. **MVP必須:** Day21 Commitment Report内のEvidence表示
3. **Post-MVP:** Memory Timeline
4. **Post-MVP:** AI Observation Badge

---

## 2. 音声没入（Voice Immersion）

### 2.1 コンセプト

> 「文字を打つ」から「声で語る」への転換

音声を入力の中心に据え、ユーザーが自然に思考を語れる環境を作る。

### 2.2 Voice-First UX原則

| 原則 | 説明 | 実装 |
|---|---|---|
| **デフォルト音声** | 画面表示時は録音待機状態 | 🎤 ボタン強調表示 |
| **テキスト代替** | 音声が難しい場合のフォールバック | 「⌨️ テキストで入力」 |
| **沈黙許容** | 無音でも急かさない | タイムアウトなし |
| **抽象表現** | アバターを使わない | Orb UI |

### 2.3 Orb UI詳細

#### 2.3.1 状態遷移

```
[待機] ──(タップ)──▶ [録音中] ──(送信)──▶ [処理中] ──▶ [完了]
   │                    │                    │
   ▼                    ▼                    ▼
 呼吸アニメ          音量連動            回転アニメ
 (4秒サイクル)       + 波紋              (8秒/回転)
```

#### 2.3.2 視覚仕様

| 状態 | サイズ | アニメーション | 色 |
|---|---|---|---|
| 待機 | 120x120px | scale: 1↔1.05 (4s) | accent → background gradient |
| 録音中 | 120x120px | scale: 1 + volume*0.15 | accent → background |
| 処理中 | 120x120px | rotate: 360° (8s) | accent → background |
| 完了 | 120x120px | 静止 | accent (fade) |

#### 2.3.3 Subtitles

- **透過度:** 40%
- **位置:** 画面中央やや下
- **フォント:** Noto Sans JP, 14px
- **挙動:** STT結果をリアルタイム表示、古いテキストはフェードアウト

### 2.4 音声録音フロー

```
┌───────────────────────────────────────────────────────────┐
│ 1. 画面表示                                               │
│    └▶ Orb待機状態（呼吸アニメ）                          │
│    └▶ 「今日はどうでしたか？」プロンプト表示              │
│                                                           │
│ 2. 録音開始（Orbタップで明示的に開始）                    │
│    └▶ haptics.medium                                     │
│    └▶ Orb音量連動アニメ開始                              │
│    └▶ Reflection Pulse (60bpm) 開始                      │
│                                                           │
│ 3. 録音中                                                 │
│    └▶ 経過時間表示                                        │
│    └▶ 沈黙許容（急かさない）                              │
│                                                           │
│ 4. 送信                                                   │
│    └▶ haptics.medium                                     │
│    └▶ 音声ファイル → Supabase Storage                    │
│    └▶ Orb処理中アニメ開始                                │
│    └▶ STT実行 → Subtitles表示                            │
│                                                           │
│ 5. AI応答                                                 │
│    └▶ Mirror Feedback表示                                │
│    └▶ If-Then質問へ                                       │
└───────────────────────────────────────────────────────────┘
```

### 2.5 沈黙許容の詳細

| 沈黙時間 | UIの反応 |
|---|---|
| 0-30秒 | 変化なし。Orbは穏やかに脈動 |
| 30-60秒 | 変化なし |
| 60秒以上 | 控えめなヒント表示（オプション）「思いつくままに話してみてください」 |
| 任意 | タイムアウトなし。ユーザーが明示的に送信するまで待機 |

### 2.6 テキスト代替フロー

- 「⌨️ テキストで入力」ボタンをタップ
- テキスト入力画面/モーダルに遷移
- 送信後、音声版と同様のMirror Feedback + If-Then質問

---

## 3. 課金透明性（Payment Transparency）

### 3.1 コンセプト

> 「課金は開始時に告知、中途請求しない」

VowArkはIntegrityを重視し、課金体験においても透明性と誠実さを徹底する。

### 3.2 透明性原則

| 原則 | 説明 | タイミング |
|---|---|---|
| **開始時告知** | 料金は最初に明示 | Day0オンボーディング |
| **中途請求禁止** | 途中での追加課金なし | 全期間 |
| **根拠開示** | AIの判断根拠を表示 | Day21 Report |
| **解約不要明示** | 解約手続きが不要であることを明示 | 購入確認、設定画面 |
| **自動終了明示** | 9週間後に自動終了することを明示 | 購入確認、設定画面 |
| **返金窓口明示** | 返金はApple/Googleサポート経由であることを明示 | 購入確認、設定画面 |

### 3.3 課金フロー

```
Day 0 (オンボーディング)
│
├▶ 料金告知（事前に知らせる）
│   「21日間のトライアル後、継続する場合は9週間一括¥X,XXXです」
│
▼
Day 1-10 (トライアル前半)
│
├▶ 課金への言及なし（集中を妨げない）
│
▼
Day 10 (決済情報登録 - 任意)
│
├▶ 決済情報をお預かり（課金はしない）
├▶ スキップ可能
│
▼
Day 11-21 (トライアル後半)
│
├▶ 課金への言及なし
│
▼
Day 21 (Judgment Gate)
│
├▶ Commitment Report表示
├▶ 誓い更新・Tough Love合意
├▶ 継続/停止の選択
│   ├▶ 継続 → 決済確認画面 → 9週間分一括課金
│   └▶ 停止 → Exit Ritual
│
▼
Day 22+ (有料期間 - Week 4-12)
│
├▶ 9週間一括払い済み（買い切り）
├▶ 解約手続き不要（自動更新なし）
└▶ 9週間後に自動終了
```

### 3.4 Day21 決済確認画面

```
┌─────────────────────────────────────────┐
│                                          │
│  継続を確定する                          │
│                                          │
│  ───────────────────────────────────    │
│                                          │
│  📋 ご利用内容                           │
│                                          │
│  VowArk 9週間コーチングパッケージ         │
│  期間: Week 4-12（9週間）                │
│                                          │
│  ┌────────────────────────────────────┐ │
│  │  一括払い: ¥19,800（税込）          │ │
│  └────────────────────────────────────┘ │
│                                          │
│  ✓ 解約手続き不要                        │
│  ✓ 追加課金なし                          │
│  ✓ 9週間後に自動終了                     │
│                                          │
│  ───────────────────────────────────    │
│                                          │
│  一度払えば、あとは                       │
│  あなたの旅に集中するだけ。               │
│                                          │
│  ───────────────────────────────────    │
│                                          │
│  [✓] 利用規約に同意する                  │
│                                          │
│         [ 9週間パッケージを購入 ]         │ ← Deep Gold
│                                          │
│         [ 購入を復元 ]                    │
│                                          │
│         [ 戻る ]                         │
│                                          │
└─────────────────────────────────────────┘
```

> **Non-Renewing Subscription:**
> サブスクではなく買い切り。自動更新なし。

### 3.5 購入状態確認画面

```
設定画面
│
├▶ 「購入状態を確認」
│   ├▶ ステータス: アクティブ ●
│   ├▶ 進捗: Week X / 12
│   ├▶ 残り: XX日
│   └▶ 終了日: 2026年X月X日
│
└▶ 注意書き
    「※ 解約手続きは不要です」
    「※ 追加課金はありません」
```

### 3.6 卒業フロー（9週間完了時）

```
9週間完了
│
▼
卒業画面
│
├▶ 祝福メッセージ
│   「おめでとうございます。9週間の旅を完走しました。」
│
├▶ 選択肢
│   ├▶ 「卒業する」→ Exit Ritual（成功版）へ
│   └▶ 「もう一度挑戦する」→ 同じパッケージを再購入
│
└▶ 再購入可能であることを明示
    「新しい目標で再チャレンジできます」
```

### 3.7 禁止事項

- 期限切れ間際のプレッシャー通知
- 再購入を強要するダークパターン
- 隠れた追加料金

### 3.8 返金ポリシー（参考）

```
【買い切りモデルの返金】
• 返金が必要な場合: Apple/Googleサポートへ申請
• VowArk側での直接返金は不可（IAPの制約）
• Webhook経由で返金検知 → ステータス自動更新

【ユーザーメリット】
• 一度払えば追加課金の心配なし
• 解約を忘れて課金される心配なし
• 合わなくても「損した」のは一度だけ

※買い切りモデルにより、
  「知らないうちに課金された」リスクをゼロに。
```

---

## 4. 実装優先順位

### 4.1 MVP必須

| 項目 | 関連チケット |
|---|---|
| Evidence Links in Mirror Feedback | 004, 006 |
| Orb UI基本実装 | 004 |
| 音声録音 + STT | 002, 004 |
| Day21 Report 8ブロック | 007 |
| 決済確認画面（透明性） | 008 |

### 4.2 Post-MVP

| 項目 | 関連チケット |
|---|---|
| Memory Timeline | 006 |
| AI Observation Badge | 006 |
| 卒業フロー最適化 | 008 |
| 再チャレンジフロー | 008 |

---

## 5. 関連ドキュメント

- [requirements.md](requirements.md) - 基本要件
- [design-system-v0.1.md](../design/design-system-v0.1.md) - デザインシステム
- [004-voice-checkin.md](004-voice-checkin.md) - 音声チェックイン仕様
- [007-day21-judgment-gate.md](007-day21-judgment-gate.md) - Day21仕様

---

## 変更履歴

| バージョン | 日付 | 変更内容 |
|---|---|---|
| v0.1 | 2025-01-09 | 初版作成 |
